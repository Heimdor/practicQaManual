import{Q as F}from"./QSelect-HrLhbk6i.js";import{Q as N,a as R}from"./QImg-Dhvk776f.js";import{Q as L}from"./QToggle-S19IqG1-.js";import{Q as M,a as T,b as I}from"./QPage-BKmakszr.js";import{c as U,a as _,e as j,h as z,f as V,d as W,r as Q,C as A,D as c,E as s,F as E,N as i,H as o,L as v,O,M as $,P,I as k,J as m,R as G,Q as H}from"./index-DwtXEeEE.js";import{Q as J}from"./QBtnGroup-DJtZD1WM.js";import{u as K,a as X}from"./use-key-composition-ByB1cnyR.js";import{Q as Y}from"./QChip-BlzJDsgu.js";import{Q as Z}from"./QCardActions-C7c0BvX-.js";import{Q as ee,a as S,b as w}from"./QItem-Cav7HXzn.js";import{Q as te}from"./QList-DPQGZhAk.js";import{b as le}from"./main-CmGCYb36.js";import{u as ae}from"./use-quasar-ChbBNSRg.js";import{s as oe}from"./pinia-DeEn6jnt.js";import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./format-DYNuBcB2.js";import"./use-prevent-scroll-dlfsZIDd.js";import"./focus-manager-BJWzFvJg.js";import"./QDialog-1wfPclpf.js";import"./TouchPan-Cxkih3Ys.js";import"./use-id-DNP9DObu.js";const ne=U({name:"QBtnToggle",props:{...K,modelValue:{required:!0},options:{type:Array,required:!0,validator:l=>l.every(u=>("label"in u||"icon"in u||"slot"in u)&&"value"in u)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(l,{slots:u,emit:f}){const b=_(()=>l.options.find(r=>r.value===l.modelValue)!==void 0),B=_(()=>({type:"hidden",name:l.name,value:l.modelValue})),p=X(B),g=_(()=>j(l)),y=_(()=>({rounded:l.rounded,dense:l.dense,...g.value})),h=_(()=>l.options.map((r,a)=>{const{attrs:t,value:e,slot:C,...d}=r;return{slot:C,props:{key:a,"aria-pressed":e===l.modelValue?"true":"false",...t,...d,...y.value,disable:l.disable===!0||d.disable===!0,color:e===l.modelValue?n(d,"toggleColor"):n(d,"color"),textColor:e===l.modelValue?n(d,"toggleTextColor"):n(d,"textColor"),noCaps:n(d,"noCaps")===!0,noWrap:n(d,"noWrap")===!0,size:n(d,"size"),padding:n(d,"padding"),ripple:n(d,"ripple"),stack:n(d,"stack")===!0,stretch:n(d,"stretch")===!0,onClick(D){q(e,r,D)}}}}));function q(r,a,t){l.readonly!==!0&&(l.modelValue===r?l.clearable===!0&&(f("update:modelValue",null,null),f("clear")):f("update:modelValue",r,a),f("click",t))}function n(r,a){return r[a]===void 0?l[a]:r[a]}function x(){const r=h.value.map(a=>z(V,a.props,a.slot!==void 0?u[a.slot]:void 0));return l.name!==void 0&&l.disable!==!0&&b.value===!0&&p(r,"push"),W(u.default,r)}return()=>z(J,{class:"q-btn-toggle",...g.value,rounded:l.rounded,stretch:l.stretch,glossy:l.glossy,spread:l.spread},x)}}),re={class:"row q-col-gutter-lg"},ie={class:"col-12 col-md-3"},de={class:"col-12 col-md-9"},ue={class:"row q-mb-md"},ce={class:"col-auto"},me={key:0,class:"row q-col-gutter-md"},ge={key:0,class:"absolute-top-right q-ma-sm"},ve={class:"text-h6"},fe={class:"text-subtitle2 text-grey-7"},pe={class:"text-h5 text-weight-bold text-primary q-mt-sm"},_e={class:"text-caption text-grey-6"},be={key:1},ye=["src"],he={class:"text-h5 text-weight-bold text-primary q-mb-sm"},xe={key:2,class:"text-center q-mt-xl"},Ce={__name:"ShopPage",setup(l){const u=ae(),f=E(),b=le(),{products:B}=oe(b),p=Q(null),g=Q({min:0,max:2e3}),y=Q(!1),h=Q("grid"),q=[{label:"Электроника",value:"electronics"},{label:"Обувь",value:"shoes"}],n=_(()=>{let a=B.value;return p.value&&(a=a.filter(t=>t.category===p.value)),a=a.filter(t=>t.price>=g.value.min&&t.price<=g.value.max),y.value&&(a=a.filter(t=>t.stock>0)),a});function x(a){b.addToCart(a),u.notify({type:"positive",message:`${a.name} добавлен в корзину`,position:"top"})}function r(a){b.addToCart(a),f.push("/checkout")}return(a,t)=>(c(),A(M,{class:"q-pa-lg"},{default:s(()=>[i("div",re,[i("div",ie,[o(T,null,{default:s(()=>[o(I,null,{default:s(()=>[t[4]||(t[4]=i("h6",null,"Фильтры",-1)),o(F,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=e=>p.value=e),options:q,label:"Категория",clearable:"","emit-value":"","map-options":"",class:"q-mb-md"},null,8,["modelValue"]),o(N,{modelValue:g.value,"onUpdate:modelValue":t[1]||(t[1]=e=>g.value=e),min:0,max:2e3,step:50,label:"","label-always":"",class:"q-mb-md"},null,8,["modelValue"]),o(L,{modelValue:y.value,"onUpdate:modelValue":t[2]||(t[2]=e=>y.value=e),label:"Только в наличии"},null,8,["modelValue"])]),_:1,__:[4]})]),_:1})]),i("div",de,[i("div",ue,[t[5]||(t[5]=i("div",{class:"col"},[i("h4",{class:"q-my-none"},"Каталог товаров")],-1)),i("div",ce,[o(ne,{modelValue:h.value,"onUpdate:modelValue":t[3]||(t[3]=e=>h.value=e),options:[{label:"Сетка",value:"grid",icon:"grid_view"},{label:"Список",value:"list",icon:"view_list"}]},null,8,["modelValue"])])]),h.value==="grid"?(c(),v("div",me,[(c(!0),v($,null,P(n.value,e=>(c(),v("div",{key:e.id,class:"col-12 col-sm-6 col-md-4"},[o(T,{class:"product-card"},{default:s(()=>[o(R,{src:e.image,style:{height:"200px"},class:"bg-grey-3"},{default:s(()=>[e.stock===0?(c(),v("div",ge,[o(Y,{color:"negative","text-color":"white",size:"sm"},{default:s(()=>t[6]||(t[6]=[k(" Нет в наличии ",-1)])),_:1,__:[6]})])):O("",!0)]),_:2},1032,["src"]),o(I,null,{default:s(()=>[i("div",ve,m(e.name),1),i("div",fe,m(e.category),1),i("div",pe," $"+m(e.price),1),i("div",_e," В наличии: "+m(e.stock)+" шт. ",1)]),_:2},1024),o(Z,{align:"around"},{default:s(()=>[o(V,{color:"primary",label:"В корзину",icon:"add_shopping_cart",onClick:C=>x(e),disable:e.stock===0},null,8,["onClick","disable"]),o(V,{flat:"",color:"secondary",label:"Купить сейчас",onClick:C=>r(e)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128))])):(c(),v("div",be,[o(te,{bordered:"",separator:""},{default:s(()=>[(c(!0),v($,null,P(n.value,e=>(c(),A(ee,{key:e.id,class:"q-pa-md"},{default:s(()=>[o(S,{avatar:""},{default:s(()=>[o(G,{size:"80px",square:""},{default:s(()=>[i("img",{src:e.image},null,8,ye)]),_:2},1024)]),_:2},1024),o(S,null,{default:s(()=>[o(w,{class:"text-h6"},{default:s(()=>[k(m(e.name),1)]),_:2},1024),o(w,{caption:""},{default:s(()=>[k(m(e.category),1)]),_:2},1024),o(w,{caption:""},{default:s(()=>[k("В наличии: "+m(e.stock)+" шт.",1)]),_:2},1024)]),_:2},1024),o(S,{side:""},{default:s(()=>[i("div",he," $"+m(e.price),1),o(V,{color:"primary",label:"В корзину",size:"sm",onClick:C=>x(e),disable:e.stock===0},null,8,["onClick","disable"])]),_:2},1024)]),_:2},1024))),128))]),_:1})])),n.value.length===0?(c(),v("div",xe,[o(H,{name:"search_off",size:"4rem",color:"grey-5"}),t[7]||(t[7]=i("p",{class:"text-h6 text-grey-6 q-mt-md"}," Товары не найдены ",-1))])):O("",!0)])])]),_:1}))}},je=se(Ce,[["__scopeId","data-v-667307a8"]]);export{je as default};
