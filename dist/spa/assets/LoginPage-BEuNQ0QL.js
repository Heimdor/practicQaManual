import{Q as h,a as q,b as p}from"./QPage-BKmakszr.js";import{Q as m}from"./QInput-CAHg_qN-.js";import{r as f,A as k,C as c,D as v,E as i,F as C,H as t,N as n,J as N,O as _,Q as B,f as b,I as V}from"./index-DwtXEeEE.js";import{Q as D}from"./QForm-B7PInOLQ.js";import{b as E}from"./main-CmGCYb36.js";import{u as P}from"./use-quasar-ChbBNSRg.js";import"./use-key-composition-ByB1cnyR.js";import"./use-id-DNP9DObu.js";import"./focus-manager-BJWzFvJg.js";import"./pinia-DeEn6jnt.js";const S={class:"text-h5 text-center q-mb-md"},U={class:"q-mt-md"},F={class:"text-center q-mt-md"},z={__name:"LoginPage",setup(I){const u=P(),g=C(),y=E(),s=f(!0),r=f(!1),d=f(!1),a=k({name:"",email:"",password:"",phone:""});function w(){s.value=!s.value,Object.assign(a,{name:"",email:"",password:"",phone:""})}function x(o){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)}async function Q(){d.value=!0,await new Promise(o=>setTimeout(o,1e3));try{if(s.value){if(a.email&&a.password){const o={name:a.email==="admin@test.com"?"Администратор":"Пользователь",email:a.email,phone:"+7 (999) 123-45-67"};y.login(o),u.notify({type:"positive",message:"Успешный вход в систему!",position:"top"}),g.push("/")}}else{const o={name:a.name,email:a.email,phone:a.phone||"+7 (999) 000-00-00"};y.login(o),u.notify({type:"positive",message:"Регистрация успешна!",position:"top"}),g.push("/")}}catch{u.notify({type:"negative",message:"Произошла ошибка. Попробуйте снова.",position:"top"})}finally{d.value=!1}}return(o,l)=>(v(),c(h,{class:"flex flex-center"},{default:i(()=>[t(q,{style:{width:"400px","max-width":"90vw"}},{default:i(()=>[t(p,null,{default:i(()=>[n("div",S,N(s.value?"Вход в систему":"Регистрация"),1)]),_:1}),t(p,null,{default:i(()=>[t(D,{onSubmit:Q,class:"q-gutter-md"},{default:i(()=>[s.value?_("",!0):(v(),c(m,{key:0,modelValue:a.name,"onUpdate:modelValue":l[0]||(l[0]=e=>a.name=e),label:"Имя",required:"",rules:[e=>!!e||"Поле обязательно"]},null,8,["modelValue","rules"])),t(m,{modelValue:a.email,"onUpdate:modelValue":l[1]||(l[1]=e=>a.email=e),type:"email",label:"Email",required:"",rules:[e=>!!e||"Поле обязательно",e=>x(e)||"Неверный формат email"]},null,8,["modelValue","rules"]),t(m,{modelValue:a.password,"onUpdate:modelValue":l[3]||(l[3]=e=>a.password=e),type:r.value?"text":"password",label:"Пароль",required:"",rules:[e=>!!e||"Поле обязательно",e=>e.length>=6||"Пароль должен содержать минимум 6 символов"]},{append:i(()=>[t(B,{name:r.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:l[2]||(l[2]=e=>r.value=!r.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),s.value?_("",!0):(v(),c(m,{key:1,modelValue:a.phone,"onUpdate:modelValue":l[4]||(l[4]=e=>a.phone=e),label:"Телефон",mask:"# (###) ###-##-##",placeholder:"+7 (___) ___-__-__"},null,8,["modelValue"])),n("div",U,[t(b,{type:"submit",color:"primary",label:s.value?"Войти":"Зарегистрироваться",class:"full-width",loading:d.value},null,8,["label","loading"])]),n("div",F,[t(b,{flat:"",label:s.value?"Нет аккаунта? Зарегистрируйтесь":"Уже есть аккаунт? Войдите",onClick:w},null,8,["label"])])]),_:1})]),_:1}),t(p,{class:"bg-grey-1"},{default:i(()=>l[5]||(l[5]=[n("div",{class:"text-caption text-grey-7"},[n("strong",null,"Демо данные для входа:"),n("br"),V(" Email: admin@test.com"),n("br"),V(" Пароль: password ")],-1)])),_:1,__:[5]})]),_:1})]),_:1}))}};export{z as default};
