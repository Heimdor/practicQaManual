import{c as N,h as m,b as A,j as Qe,Z as _e,g as E,r as M,a as g,Q as K,v as Be,a7 as Ne,a0 as $e,a1 as H,a2 as O,a3 as Y,k as Ae,a4 as R,V as z,Y as se,a6 as Le,w as De,a8 as Me,a9 as qe,p as Ee,q as W,aa as xe,S as Fe,T as Oe,ab as ue,d as ke,X as je,y as ze,x as Ue,A as de,C as ce,D as $,E as S,F as Re,N as x,L as j,K as X,H as f,f as D,O as ve,J as T,M as Ke,P as He,I as G}from"./index-DwtXEeEE.js";import{Q as B}from"./QInput-CAHg_qN-.js";import{Q as Ye}from"./QSelect-HrLhbk6i.js";import{Q as me}from"./QForm-B7PInOLQ.js";import{g as pe,c as We,s as fe}from"./format-DYNuBcB2.js";import{c as Xe}from"./use-prevent-scroll-dlfsZIDd.js";import{u as oe,a as le,b as Ge}from"./main-CmGCYb36.js";import{o as Je,u as Ze,a as et,b as tt,c as nt,Q as at}from"./QToggle-S19IqG1-.js";import{u as ot,a as lt}from"./use-key-composition-ByB1cnyR.js";import{Q as rt,a as J,b as Z}from"./QPage-BKmakszr.js";import{Q as it,a as be,b as ee}from"./QItem-Cav7HXzn.js";import{Q as st}from"./QList-DPQGZhAk.js";import{Q as ge}from"./QSeparator-BDotjxYQ.js";import{u as ut}from"./use-quasar-ChbBNSRg.js";import{s as dt}from"./pinia-DeEn6jnt.js";import"./focus-manager-BJWzFvJg.js";import"./QChip-BlzJDsgu.js";import"./QDialog-1wfPclpf.js";import"./use-id-DNP9DObu.js";const te=N({name:"QStepperNavigation",setup(e,{slots:n}){return()=>m("div",{class:"q-stepper__nav"},A(n.default))}}),ct=N({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:n,emit:i}){let h=!1,v,t,l=null,s=null,b,u;function r(){v?.(),v=null,h=!1,l!==null&&(clearTimeout(l),l=null),s!==null&&(clearTimeout(s),s=null),t?.removeEventListener("transitionend",b),b=null}function k(c,a,y){a!==void 0&&(c.style.height=`${a}px`),c.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,h=!0,v=y}function q(c,a){c.style.overflowY=null,c.style.height=null,c.style.transition=null,r(),a!==u&&i(a)}function P(c,a){let y=0;t=c,h===!0?(r(),y=c.offsetHeight===c.scrollHeight?0:void 0):(u="hide",c.style.overflowY="hidden"),k(c,y,a),l=setTimeout(()=>{l=null,c.style.height=`${c.scrollHeight}px`,b=V=>{s=null,(Object(V)!==V||V.target===c)&&q(c,"show")},c.addEventListener("transitionend",b),s=setTimeout(b,e.duration*1.1)},100)}function d(c,a){let y;t=c,h===!0?r():(u="show",c.style.overflowY="hidden",y=c.scrollHeight),k(c,y,a),l=setTimeout(()=>{l=null,c.style.height=0,b=V=>{s=null,(Object(V)!==V||V.target===c)&&q(c,"hide")},c.addEventListener("transitionend",b),s=setTimeout(b,e.duration*1.1)},100)}return Qe(()=>{h===!0&&r()}),()=>m(_e,{css:!1,appear:e.appear,onEnter:P,onLeave:d},n.default)}}),Ce=N({name:"StepHeader",props:{stepper:{},step:{},goToPanel:Function},setup(e,{attrs:n}){const{proxy:{$q:i}}=E(),h=M(null),v=g(()=>e.stepper.modelValue===e.step.name),t=g(()=>{const a=e.step.disable;return a===!0||a===""}),l=g(()=>{const a=e.step.error;return a===!0||a===""}),s=g(()=>{const a=e.step.done;return t.value===!1&&(a===!0||a==="")}),b=g(()=>{const a=e.step.headerNav,y=a===!0||a===""||a===void 0;return t.value===!1&&e.stepper.headerNav&&y}),u=g(()=>e.step.prefix&&(v.value===!1||e.stepper.activeIcon==="none")&&(l.value===!1||e.stepper.errorIcon==="none")&&(s.value===!1||e.stepper.doneIcon==="none")),r=g(()=>{const a=e.step.icon||e.stepper.inactiveIcon;if(v.value===!0){const y=e.step.activeIcon||e.stepper.activeIcon;return y==="none"?a:y||i.iconSet.stepper.active}if(l.value===!0){const y=e.step.errorIcon||e.stepper.errorIcon;return y==="none"?a:y||i.iconSet.stepper.error}if(t.value===!1&&s.value===!0){const y=e.step.doneIcon||e.stepper.doneIcon;return y==="none"?a:y||i.iconSet.stepper.done}return a}),k=g(()=>{const a=l.value===!0?e.step.errorColor||e.stepper.errorColor:void 0;if(v.value===!0){const y=e.step.activeColor||e.stepper.activeColor||e.step.color;return y!==void 0?y:a}return a!==void 0?a:t.value===!1&&s.value===!0?e.step.doneColor||e.stepper.doneColor||e.step.color||e.stepper.inactiveColor:e.step.color||e.stepper.inactiveColor}),q=g(()=>"q-stepper__tab col-grow flex items-center no-wrap relative-position"+(k.value!==void 0?` text-${k.value}`:"")+(l.value===!0?" q-stepper__tab--error q-stepper__tab--error-with-"+(u.value===!0?"prefix":"icon"):"")+(v.value===!0?" q-stepper__tab--active":"")+(s.value===!0?" q-stepper__tab--done":"")+(b.value===!0?" q-stepper__tab--navigation q-focusable q-hoverable":"")+(t.value===!0?" q-stepper__tab--disabled":"")),P=g(()=>e.stepper.headerNav!==!0?!1:b.value);function d(){h.value?.focus(),v.value===!1&&e.goToPanel(e.step.name)}function c(a){a.keyCode===13&&v.value===!1&&e.goToPanel(e.step.name)}return()=>{const a={class:q.value};b.value===!0&&(a.onClick=d,a.onKeyup=c,Object.assign(a,t.value===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:n.tabindex||0}));const y=[m("div",{class:"q-focus-helper",tabindex:-1,ref:h}),m("div",{class:"q-stepper__dot row flex-center q-stepper__line relative-position"},[m("span",{class:"row flex-center"},[u.value===!0?e.step.prefix:m(K,{name:r.value})])])];if(e.step.title!==void 0&&e.step.title!==null){const V=[m("div",{class:"q-stepper__title"},e.step.title)];e.step.caption!==void 0&&e.step.caption!==null&&V.push(m("div",{class:"q-stepper__caption"},e.step.caption)),y.push(m("div",{class:"q-stepper__label q-stepper__line relative-position"},V))}return Be(m("div",a,y),[[Ne,P.value]])}}});function vt(e){const n=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((i,h)=>{const v=parseFloat(i);v&&(n[h]=v)}),n}const mt=$e({name:"touch-swipe",beforeMount(e,{value:n,arg:i,modifiers:h}){if(h.mouse!==!0&&O.has.touch!==!0)return;const v=h.mouseCapture===!0?"Capture":"",t={handler:n,sensitivity:vt(i),direction:pe(h),noop:Ae,mouseStart(l){fe(l,t)&&Le(l)&&(R(t,"temp",[[document,"mousemove","move",`notPassive${v}`],[document,"mouseup","end","notPassiveCapture"]]),t.start(l,!0))},touchStart(l){if(fe(l,t)){const s=l.target;R(t,"temp",[[s,"touchmove","move","notPassiveCapture"],[s,"touchcancel","end","notPassiveCapture"],[s,"touchend","end","notPassiveCapture"]]),t.start(l)}},start(l,s){O.is.firefox===!0&&Y(e,!0);const b=se(l);t.event={x:b.left,y:b.top,time:Date.now(),mouse:s===!0,dir:!1}},move(l){if(t.event===void 0)return;if(t.event.dir!==!1){z(l);return}const s=Date.now()-t.event.time;if(s===0)return;const b=se(l),u=b.left-t.event.x,r=Math.abs(u),k=b.top-t.event.y,q=Math.abs(k);if(t.event.mouse!==!0){if(r<t.sensitivity[1]&&q<t.sensitivity[1]){t.end(l);return}}else if(window.getSelection().toString()!==""){t.end(l);return}else if(r<t.sensitivity[2]&&q<t.sensitivity[2])return;const P=r/s,d=q/s;t.direction.vertical===!0&&r<q&&r<100&&d>t.sensitivity[0]&&(t.event.dir=k<0?"up":"down"),t.direction.horizontal===!0&&r>q&&q<100&&P>t.sensitivity[0]&&(t.event.dir=u<0?"left":"right"),t.direction.up===!0&&r<q&&k<0&&r<100&&d>t.sensitivity[0]&&(t.event.dir="up"),t.direction.down===!0&&r<q&&k>0&&r<100&&d>t.sensitivity[0]&&(t.event.dir="down"),t.direction.left===!0&&r>q&&u<0&&q<100&&P>t.sensitivity[0]&&(t.event.dir="left"),t.direction.right===!0&&r>q&&u>0&&q<100&&P>t.sensitivity[0]&&(t.event.dir="right"),t.event.dir!==!1?(z(l),t.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),We(),t.styleCleanup=c=>{t.styleCleanup=void 0,document.body.classList.remove("non-selectable");const a=()=>{document.body.classList.remove("no-pointer-events--children")};c===!0?setTimeout(a,50):a()}),t.handler({evt:l,touch:t.event.mouse!==!0,mouse:t.event.mouse,direction:t.event.dir,duration:s,distance:{x:r,y:q}})):t.end(l)},end(l){t.event!==void 0&&(H(t,"temp"),O.is.firefox===!0&&Y(e,!1),t.styleCleanup?.(!0),l!==void 0&&t.event.dir!==!1&&z(l),t.event=void 0)}};if(e.__qtouchswipe=t,h.mouse===!0){const l=h.mouseCapture===!0||h.mousecapture===!0?"Capture":"";R(t,"main",[[e,"mousedown","mouseStart",`passive${l}`]])}O.has.touch===!0&&R(t,"main",[[e,"touchstart","touchStart",`passive${h.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,n){const i=e.__qtouchswipe;i!==void 0&&(n.oldValue!==n.value&&(typeof n.value!="function"&&i.end(),i.handler=n.value),i.direction=pe(n.modifiers))},beforeUnmount(e){const n=e.__qtouchswipe;n!==void 0&&(H(n,"main"),H(n,"temp"),O.is.firefox===!0&&Y(e,!1),n.styleCleanup?.(),delete e.__qtouchswipe)}});function Se(){let e=Object.create(null);return{getCache:(n,i)=>e[n]===void 0?e[n]=typeof i=="function"?i():i:e[n],setCache(n,i){e[n]=i},hasCache(n){return Object.hasOwnProperty.call(e,n)},clearCache(n){n!==void 0?delete e[n]:e=Object.create(null)}}}const pt={name:{required:!0},disable:Boolean},he={setup(e,{slots:n}){return()=>m("div",{class:"q-panel scroll",role:"tabpanel"},A(n.default))}},ft={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},bt=["update:modelValue","beforeTransition","transition"];function gt(){const{props:e,emit:n,proxy:i}=E(),{getCache:h}=Se(),{registerTimeout:v}=Xe();let t,l;const s=M(null),b={value:null};function u(_){const w=e.vertical===!0?"up":"left";F((i.$q.lang.rtl===!0?-1:1)*(_.direction===w?1:-1))}const r=g(()=>[[mt,u,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),k=g(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),q=g(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),P=g(()=>`--q-transition-duration: ${e.transitionDuration}ms`),d=g(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),c=g(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),a=g(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);De(()=>e.modelValue,(_,w)=>{const Q=C(_)===!0?I(_):-1;l!==!0&&p(Q===-1?0:Q<I(w)?-1:1),b.value!==Q&&(b.value=Q,n("beforeTransition",_,w),v(()=>{n("transition",_,w)},e.transitionDuration))});function y(){F(1)}function V(){F(-1)}function L(_){n("update:modelValue",_)}function C(_){return _!=null&&_!==""}function I(_){return t.findIndex(w=>w.props.name===_&&w.props.disable!==""&&w.props.disable!==!0)}function o(){return t.filter(_=>_.props.disable!==""&&_.props.disable!==!0)}function p(_){const w=_!==0&&e.animated===!0&&b.value!==-1?"q-transition--"+(_===-1?k.value:q.value):null;s.value!==w&&(s.value=w)}function F(_,w=b.value){let Q=w+_;for(;Q!==-1&&Q<t.length;){const U=t[Q];if(U!==void 0&&U.props.disable!==""&&U.props.disable!==!0){p(_),l=!0,n("update:modelValue",U.props.name),setTimeout(()=>{l=!1});return}Q+=_}e.infinite===!0&&t.length!==0&&w!==-1&&w!==t.length&&F(_,_===-1?t.length:-1)}function re(){const _=I(e.modelValue);return b.value!==_&&(b.value=_),!0}function ie(){const _=C(e.modelValue)===!0&&re()&&t[b.value];return e.keepAlive===!0?[m(qe,c.value,[m(a.value===!0?h(d.value,()=>({...he,name:d.value})):he,{key:d.value,style:P.value},()=>_)])]:[m("div",{class:"q-panel scroll",style:P.value,key:d.value,role:"tabpanel"},[_])]}function Pe(){if(t.length!==0)return e.animated===!0?[m(_e,{name:s.value},ie)]:ie()}function Ie(_){return t=Me(A(_.default,[])).filter(w=>w.props!==null&&w.props.slot===void 0&&C(w.props.name)===!0),t.length}function Te(){return t}return Object.assign(i,{next:y,previous:V,goTo:L}),{panelIndex:b,panelDirectives:r,updatePanelsList:Ie,updatePanelIndex:re,getPanelContent:Pe,getEnabledPanels:o,getPanels:Te,isValidPanelName:C,keepAliveProps:c,needsUniqueKeepAliveWrapper:a,goToPanelByOffset:F,goToPanel:L,nextPanel:y,previousPanel:V}}function Ve(e){return m("div",{class:"q-stepper__step-content"},[m("div",{class:"q-stepper__step-inner"},A(e.default))])}const ye={setup(e,{slots:n}){return()=>Ve(n)}},ne=N({name:"QStep",props:{...pt,icon:String,color:String,title:{type:String,required:!0},caption:String,prefix:[String,Number],doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String,headerNav:{type:Boolean,default:!0},done:Boolean,error:Boolean,onScroll:[Function,Array]},setup(e,{slots:n,emit:i}){const{proxy:{$q:h}}=E(),v=Ee(xe,W);if(v===W)return console.error("QStep needs to be a child of QStepper"),W;const{getCache:t}=Se(),l=M(null),s=g(()=>v.value.modelValue===e.name),b=g(()=>h.platform.is.ios!==!0&&h.platform.is.chrome===!0||s.value!==!0||v.value.vertical!==!0?{}:{onScroll(k){const{target:q}=k;q.scrollTop>0&&(q.scrollTop=0),e.onScroll!==void 0&&i("scroll",k)}}),u=g(()=>typeof e.name=="string"||typeof e.name=="number"?e.name:String(e.name));function r(){const k=v.value.vertical;return k===!0&&v.value.keepAlive===!0?m(qe,v.value.keepAliveProps.value,s.value===!0?[m(v.value.needsUniqueKeepAliveWrapper.value===!0?t(u.value,()=>({...ye,name:u.value})):ye,{key:u.value},n.default)]:void 0):k!==!0||s.value===!0?Ve(n):void 0}return()=>m("div",{ref:l,class:"q-stepper__step",role:"tabpanel",...b.value},v.value.vertical===!0?[m(Ce,{stepper:v.value,step:e,goToPanel:v.value.goToPanel}),v.value.animated===!0?m(ct,r):r()]:[r()])}}),ht=()=>m("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24"},[m("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),m("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]),yt=N({name:"QRadio",props:{...oe,...Fe,...ot,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(e,{slots:n,emit:i}){const{proxy:h}=E(),v=le(e,h.$q),t=Oe(e,Je),l=M(null),{refocusTargetEl:s,refocusTarget:b}=Ze(e,l),u=g(()=>ue(e.modelValue)===ue(e.val)),r=g(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(e.disable===!0?" disabled":"")+(v.value===!0?" q-radio--dark":"")+(e.dense===!0?" q-radio--dense":"")+(e.leftLabel===!0?" reverse":"")),k=g(()=>{const C=e.color!==void 0&&(e.keepColor===!0||u.value===!0)?` text-${e.color}`:"";return`q-radio__inner relative-position q-radio__inner--${u.value===!0?"truthy":"falsy"}${C}`}),q=g(()=>(u.value===!0?e.checkedIcon:e.uncheckedIcon)||null),P=g(()=>e.disable===!0?-1:e.tabindex||0),d=g(()=>{const C={type:"radio"};return e.name!==void 0&&Object.assign(C,{".checked":u.value===!0,"^checked":u.value===!0?"checked":void 0,name:e.name,value:e.val}),C}),c=lt(d);function a(C){C!==void 0&&(z(C),b(C)),e.disable!==!0&&u.value!==!0&&i("update:modelValue",e.val,C)}function y(C){(C.keyCode===13||C.keyCode===32)&&z(C)}function V(C){(C.keyCode===13||C.keyCode===32)&&a(C)}Object.assign(h,{set:a});const L=ht();return()=>{const C=q.value!==null?[m("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[m(K,{class:"q-radio__icon",name:q.value})])]:[L];e.disable!==!0&&c(C,"unshift"," q-radio__native q-ma-none q-pa-none");const I=[m("div",{class:k.value,style:t.value,"aria-hidden":"true"},C)];s.value!==null&&I.push(s.value);const o=e.label!==void 0?ke(n.default,[e.label]):A(n.default);return o!==void 0&&I.push(m("div",{class:"q-radio__label q-anchor--skip"},o)),m("div",{ref:l,class:r.value,tabindex:P.value,role:"radio","aria-label":e.label,"aria-checked":u.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:a,onKeydown:y,onKeyup:V},I)}}}),_t=()=>m("div",{key:"svg",class:"q-checkbox__bg absolute"},[m("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[m("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),m("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]),qt=N({name:"QCheckbox",props:tt,emits:et,setup(e){const n=_t();function i(h,v){const t=g(()=>(h.value===!0?e.checkedIcon:v.value===!0?e.indeterminateIcon:e.uncheckedIcon)||null);return()=>t.value!==null?[m("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[m(K,{class:"q-checkbox__icon",name:t.value})])]:[n]}return nt("checkbox",i)}}),we={radio:yt,checkbox:qt,toggle:at},xt=Object.keys(we);function ae(e,n){if(typeof e=="function")return e;const i=e!==void 0?e:n;return h=>h[i]}const kt=N({name:"QOptionGroup",props:{...oe,modelValue:{required:!0},options:{type:Array,validator:e=>e.every(je),default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],name:String,type:{type:String,default:"radio",validator:e=>xt.includes(e)},color:String,keepColor:Boolean,dense:Boolean,size:String,leftLabel:Boolean,inline:Boolean,disable:Boolean},emits:["update:modelValue"],setup(e,{emit:n,slots:i}){const{proxy:{$q:h}}=E(),v=Array.isArray(e.modelValue);e.type==="radio"?v===!0&&console.error("q-option-group: model should not be array"):v===!1&&console.error("q-option-group: model should be array in your case");const t=le(e,h),l=g(()=>we[e.type]),s=g(()=>ae(e.optionValue,"value")),b=g(()=>ae(e.optionLabel,"label")),u=g(()=>ae(e.optionDisable,"disable")),r=g(()=>e.options.map(d=>({val:s.value(d),name:d.name===void 0?e.name:d.name,disable:e.disable||u.value(d),leftLabel:d.leftLabel===void 0?e.leftLabel:d.leftLabel,color:d.color===void 0?e.color:d.color,checkedIcon:d.checkedIcon,uncheckedIcon:d.uncheckedIcon,dark:d.dark===void 0?t.value:d.dark,size:d.size===void 0?e.size:d.size,dense:e.dense,keepColor:d.keepColor===void 0?e.keepColor:d.keepColor}))),k=g(()=>"q-option-group q-gutter-x-sm"+(e.inline===!0?" q-option-group--inline":"")),q=g(()=>{const d={role:"group"};return e.type==="radio"&&(d.role="radiogroup",e.disable===!0&&(d["aria-disabled"]="true")),d});function P(d){n("update:modelValue",d)}return()=>m("div",{class:k.value,...q.value},e.options.map((d,c)=>{const a=i["label-"+c]!==void 0?()=>i["label-"+c](d):i.label!==void 0?()=>i.label(d):void 0;return m("div",[m(l.value,{label:a===void 0?b.value(d):null,modelValue:e.modelValue,"onUpdate:modelValue":P,...r.value[c]},a)])}))}}),Ct=/(-\w)/g;function St(e){const n={};for(const i in e){const h=i.replace(Ct,v=>v[1].toUpperCase());n[h]=e[i]}return n}const Vt=N({name:"QStepper",props:{...oe,...ft,flat:Boolean,bordered:Boolean,alternativeLabels:Boolean,headerNav:Boolean,contracted:Boolean,headerClass:String,inactiveColor:String,inactiveIcon:String,doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String},emits:bt,setup(e,{slots:n}){const i=E(),h=le(e,i.proxy.$q),{updatePanelsList:v,isValidPanelName:t,updatePanelIndex:l,getPanelContent:s,getPanels:b,panelDirectives:u,goToPanel:r,keepAliveProps:k,needsUniqueKeepAliveWrapper:q}=gt();ze(xe,g(()=>({goToPanel:r,keepAliveProps:k,needsUniqueKeepAliveWrapper:q,...e})));const P=g(()=>`q-stepper q-stepper--${e.vertical===!0?"vertical":"horizontal"}`+(e.flat===!0?" q-stepper--flat":"")+(e.bordered===!0?" q-stepper--bordered":"")+(h.value===!0?" q-stepper--dark q-dark":"")),d=g(()=>`q-stepper__header row items-stretch justify-between q-stepper__header--${e.alternativeLabels===!0?"alternative":"standard"}-labels`+(e.flat===!1||e.bordered===!0?" q-stepper__header--border":"")+(e.contracted===!0?" q-stepper__header--contracted":"")+(e.headerClass!==void 0?` ${e.headerClass}`:""));function c(){const a=A(n.message,[]);if(e.vertical===!0){t(e.modelValue)&&l();const y=m("div",{class:"q-stepper__content"},A(n.default));return a===void 0?[y]:a.concat(y)}return[m("div",{class:d.value},b().map(y=>{const V=St(y.props);return m(Ce,{key:V.name,stepper:e,step:V,goToPanel:r})})),a,Ue("div",{class:"q-stepper__content q-panel-parent"},s(),"cont",e.swipeable,()=>u.value)]}return()=>(v(n),m("div",{class:P.value},ke(n.navigation,c())))}}),wt={class:"row justify-center"},Pt={class:"col-12 col-md-10"},It={key:0,class:"text-center q-mt-xl"},Tt={key:1,class:"row q-col-gutter-lg"},Qt={class:"col-12 col-md-8"},Bt={class:"row q-col-gutter-md"},Nt={class:"col-6"},$t={class:"col-6"},At={key:0,class:"q-mt-md"},Lt={class:"row q-col-gutter-md q-mt-md"},Dt={class:"col-6"},Mt={class:"col-6"},Et={key:0},Ft={class:"col-12 col-md-4"},Ot={class:"row justify-between"},jt={class:"row justify-between"},zt={class:"row justify-between text-h6 text-weight-bold"},dn={__name:"CheckoutPage",setup(e){const n=ut(),i=Re(),h=Ge(),{cart:v,cartTotal:t,user:l}=dt(h),s=M(1),b=M(!1),u=de({address:"",city:"",zipCode:"",method:"standard",comments:""}),r=de({method:"cash",cardNumber:"",expiryDate:"",cvv:"",cardholderName:""}),k=[{label:"Стандартная доставка (3-5 дней) - $5",value:"standard"},{label:"Экспресс доставка (1-2 дня) - $15",value:"express"},{label:"Самовывоз - Бесплатно",value:"pickup"}],q=[{label:"Наличными при получении",value:"cash"},{label:"Банковской картой",value:"card"},{label:"Электронный кошелек",value:"wallet"}],P=g(()=>{switch(u.method){case"standard":return 10;case"express":return 20;case"pickup":return 0;default:return 0}}),d=g(()=>t.value+P.value);function c(){s.value++}function a(){s.value--}function y(){i.push("/shop")}function V(I){const o=k.find(p=>p.value===I);return o?o.label:I}function L(I){const o=q.find(p=>p.value===I);return o?o.label:I}async function C(){if(!l.value.isLoggedIn){n.notify({type:"warning",message:"Для оформления заказа необходимо войти в систему",position:"top"}),i.push("/login");return}b.value=!0;try{await new Promise(I=>setTimeout(I,2e3)),n.notify({type:"positive",message:"Заказ успешно оформлен! Номер заказа: #"+Math.floor(Math.random()*1e5),position:"top",timeout:5e3}),i.push("/profile")}catch{n.notify({type:"negative",message:"Ошибка при оформлении заказа",position:"top"})}finally{b.value=!1}}return(I,o)=>($(),ce(rt,{class:"q-pa-lg"},{default:S(()=>[x("div",wt,[x("div",Pt,[o[22]||(o[22]=x("h4",{class:"q-mb-lg"},"Оформление заказа",-1)),X(v).length===0?($(),j("div",It,[f(K,{name:"shopping_cart",size:"4rem",color:"grey-5"}),o[11]||(o[11]=x("p",{class:"text-h6 text-grey-6 q-mt-md"}," Корзина пуста. Добавьте товары для оформления заказа. ",-1)),f(D,{color:"primary",label:"Перейти к покупкам",onClick:y})])):($(),j("div",Tt,[x("div",Qt,[f(Vt,{modelValue:s.value,"onUpdate:modelValue":o[10]||(o[10]=p=>s.value=p),ref:"stepper",color:"primary",animated:""},{default:S(()=>[f(ne,{name:1,title:"Доставка",icon:"local_shipping",done:s.value>1},{default:S(()=>[f(me,{class:"q-gutter-md"},{default:S(()=>[o[12]||(o[12]=x("div",{class:"text-h6 q-mb-md"},"Адрес доставки",-1)),f(B,{modelValue:u.address,"onUpdate:modelValue":o[0]||(o[0]=p=>u.address=p),label:"Адрес",required:"",rules:[p=>!!p||"Поле обязательно"]},null,8,["modelValue","rules"]),x("div",Bt,[x("div",Nt,[f(B,{modelValue:u.city,"onUpdate:modelValue":o[1]||(o[1]=p=>u.city=p),label:"Город",required:"",rules:[p=>!!p||"Поле обязательно"]},null,8,["modelValue","rules"])]),x("div",$t,[f(B,{modelValue:u.zipCode,"onUpdate:modelValue":o[2]||(o[2]=p=>u.zipCode=p),label:"Индекс",mask:"######",required:"",rules:[p=>!!p||"Поле обязательно"]},null,8,["modelValue","rules"])])]),f(Ye,{modelValue:u.method,"onUpdate:modelValue":o[3]||(o[3]=p=>u.method=p),options:k,label:"Способ доставки","emit-value":"","map-options":"",required:""},null,8,["modelValue"]),f(B,{modelValue:u.comments,"onUpdate:modelValue":o[4]||(o[4]=p=>u.comments=p),label:"Комментарий к заказу",type:"textarea",rows:"3"},null,8,["modelValue"])]),_:1,__:[12]}),f(te,null,{default:S(()=>[f(D,{onClick:c,color:"primary",label:"Далее"})]),_:1})]),_:1},8,["done"]),f(ne,{name:2,title:"Оплата",icon:"payment",done:s.value>2},{default:S(()=>[f(me,{class:"q-gutter-md"},{default:S(()=>[o[14]||(o[14]=x("div",{class:"text-h6 q-mb-md"},"Способ оплаты",-1)),f(kt,{modelValue:r.method,"onUpdate:modelValue":o[5]||(o[5]=p=>r.method=p),options:q,color:"primary"},null,8,["modelValue"]),r.method==="card"?($(),j("div",At,[o[13]||(o[13]=x("div",{class:"text-subtitle1 q-mb-md"},"Данные карты",-1)),f(B,{modelValue:r.cardNumber,"onUpdate:modelValue":o[6]||(o[6]=p=>r.cardNumber=p),label:"Номер карты",mask:"#### #### #### ####",placeholder:"1234 5678 9012 3456",required:""},null,8,["modelValue"]),x("div",Lt,[x("div",Dt,[f(B,{modelValue:r.expiryDate,"onUpdate:modelValue":o[7]||(o[7]=p=>r.expiryDate=p),label:"Срок действия",mask:"##/##",placeholder:"MM/YY",required:""},null,8,["modelValue"])]),x("div",Mt,[f(B,{modelValue:r.cvv,"onUpdate:modelValue":o[8]||(o[8]=p=>r.cvv=p),label:"CVV",mask:"###",placeholder:"123",required:""},null,8,["modelValue"])])]),f(B,{modelValue:r.cardholderName,"onUpdate:modelValue":o[9]||(o[9]=p=>r.cardholderName=p),label:"Имя держателя карты",class:"q-mt-md",required:""},null,8,["modelValue"])])):ve("",!0)]),_:1,__:[14]}),f(te,null,{default:S(()=>[f(D,{flat:"",onClick:a,color:"primary",label:"Назад"}),f(D,{onClick:c,color:"primary",label:"Далее",class:"q-ml-sm"})]),_:1})]),_:1},8,["done"]),f(ne,{name:3,title:"Подтверждение",icon:"check"},{default:S(()=>[o[17]||(o[17]=x("div",{class:"text-h6 q-mb-md"},"Проверьте данные заказа",-1)),f(J,{class:"q-mb-md"},{default:S(()=>[f(Z,null,{default:S(()=>[o[15]||(o[15]=x("div",{class:"text-subtitle1"},"Доставка",-1)),x("div",null,T(u.address),1),x("div",null,T(u.city)+", "+T(u.zipCode),1),x("div",null,T(V(u.method)),1)]),_:1,__:[15]})]),_:1}),f(J,{class:"q-mb-md"},{default:S(()=>[f(Z,null,{default:S(()=>[o[16]||(o[16]=x("div",{class:"text-subtitle1"},"Оплата",-1)),x("div",null,T(L(r.method)),1),r.method==="card"?($(),j("div",Et," **** **** **** "+T(r.cardNumber.slice(-4)),1)):ve("",!0)]),_:1,__:[16]})]),_:1}),f(te,null,{default:S(()=>[f(D,{flat:"",onClick:a,color:"primary",label:"Назад"}),f(D,{onClick:C,color:"positive",label:"Оформить заказ",class:"q-ml-sm",loading:b.value},null,8,["loading"])]),_:1})]),_:1,__:[17]})]),_:1},8,["modelValue"])]),x("div",Ft,[f(J,null,{default:S(()=>[f(Z,null,{default:S(()=>[o[21]||(o[21]=x("div",{class:"text-h6 q-mb-md"},"Ваш заказ",-1)),f(st,null,{default:S(()=>[($(!0),j(Ke,null,He(X(v),p=>($(),ce(it,{key:p.id,dense:""},{default:S(()=>[f(be,null,{default:S(()=>[f(ee,null,{default:S(()=>[G(T(p.name),1)]),_:2},1024),f(ee,{caption:""},{default:S(()=>[G(T(p.quantity)+" x $"+T(p.price),1)]),_:2},1024)]),_:2},1024),f(be,{side:""},{default:S(()=>[f(ee,null,{default:S(()=>[G("$"+T((p.price*p.quantity).toFixed(2)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),f(ge,{class:"q-my-md"}),x("div",Ot,[o[18]||(o[18]=x("div",null,"Подытог:",-1)),x("div",null,"$"+T(X(t).toFixed(2)),1)]),x("div",jt,[o[19]||(o[19]=x("div",null,"Доставка:",-1)),x("div",null,"$"+T(P.value.toFixed(2)),1)]),f(ge,{class:"q-my-sm"}),x("div",zt,[o[20]||(o[20]=x("div",null,"Итого:",-1)),x("div",null,"$"+T(d.value.toFixed(2)),1)])]),_:1,__:[21]})]),_:1})])]))])])]),_:1}))}};export{dn as default};
