import{T as ze}from"./TouchPan-Cxkih3Ys.js";import{u as Ae,a as De}from"./main-CmGCYb36.js";import{u as Oe,a as Ee}from"./use-key-composition-ByB1cnyR.js";import{b as q}from"./format-DYNuBcB2.js";import{g as ae,r as k,a as l,W as Pe,X as p,j as je,Y as Ke,h as m,x as Qe,c as ve,w as me,V as Xe,i as He,o as We,Z as Ge,b as Ue,_ as Ye,$ as ee}from"./index-DwtXEeEE.js";import{c as se}from"./use-prevent-scroll-dlfsZIDd.js";const ce="q-slider__marker-labels",Ze=e=>({value:e}),Je=({marker:e})=>m("div",{key:e.value,style:e.style,class:e.classes},e.label),de=[34,37,40,33,39,38],pe={...Ae,...Oe,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},ea=["pan","update:modelValue","change"];function aa({updateValue:e,updatePosition:x,getDragging:M,formAttrs:r}){const{props:a,emit:N,slots:V,proxy:{$q:T}}=ae(),u=De(a,T),K=Ee(r),S=k(!1),B=k(!1),b=k(!1),g=k(!1),y=l(()=>a.vertical===!0?"--v":"--h"),A=l(()=>"-"+(a.switchLabelSide===!0?"switched":"standard")),$=l(()=>a.vertical===!0?a.reverse===!0:a.reverse!==(T.lang.rtl===!0)),R=l(()=>isNaN(a.innerMin)===!0||a.innerMin<a.min?a.min:a.innerMin),L=l(()=>isNaN(a.innerMax)===!0||a.innerMax>a.max?a.max:a.innerMax),w=l(()=>a.disable!==!0&&a.readonly!==!0&&R.value<L.value),X=l(()=>{if(a.step===0)return i=>i;const t=(String(a.step).trim().split(".")[1]||"").length;return i=>parseFloat(i.toFixed(t))}),D=l(()=>a.step===0?1:a.step),H=l(()=>w.value===!0?a.tabindex||0:-1),I=l(()=>a.max-a.min),Q=l(()=>L.value-R.value),O=l(()=>G(R.value)),E=l(()=>G(L.value)),F=l(()=>a.vertical===!0?$.value===!0?"bottom":"top":$.value===!0?"right":"left"),n=l(()=>a.vertical===!0?"height":"width"),o=l(()=>a.vertical===!0?"width":"height"),c=l(()=>a.vertical===!0?"vertical":"horizontal"),d=l(()=>{const t={role:"slider","aria-valuemin":R.value,"aria-valuemax":L.value,"aria-orientation":c.value,"data-step":a.step};return a.disable===!0?t["aria-disabled"]="true":a.readonly===!0&&(t["aria-readonly"]="true"),t}),C=l(()=>`q-slider q-slider${y.value} q-slider--${S.value===!0?"":"in"}active inline no-wrap `+(a.vertical===!0?"row":"column")+(a.disable===!0?" disabled":" q-slider--enabled"+(w.value===!0?" q-slider--editable":""))+(b.value==="both"?" q-slider--focus":"")+(a.label||a.labelAlways===!0?" q-slider--label":"")+(a.labelAlways===!0?" q-slider--label-always":"")+(u.value===!0?" q-slider--dark":"")+(a.dense===!0?" q-slider--dense q-slider--dense"+y.value:""));function z(t){const i="q-slider__"+t;return`${i} ${i}${y.value} ${i}${y.value}${A.value}`}function f(t){const i="q-slider__"+t;return`${i} ${i}${y.value}`}const _=l(()=>{const t=a.selectionColor||a.color;return"q-slider__selection absolute"+(t!==void 0?` text-${t}`:"")}),W=l(()=>f("markers")+" absolute overflow-hidden"),fe=l(()=>f("track-container")),be=l(()=>z("pin")),ge=l(()=>z("label")),he=l(()=>z("text-container")),xe=l(()=>z("marker-labels-container")+(a.markerLabelsClass!==void 0?` ${a.markerLabelsClass}`:"")),ye=l(()=>"q-slider__track relative-position no-outline"+(a.trackColor!==void 0?` bg-${a.trackColor}`:"")),ke=l(()=>{const t={[o.value]:a.trackSize};return a.trackImg!==void 0&&(t.backgroundImage=`url(${a.trackImg}) !important`),t}),Me=l(()=>"q-slider__inner absolute"+(a.innerTrackColor!==void 0?` bg-${a.innerTrackColor}`:"")),te=l(()=>{const t=E.value-O.value,i={[F.value]:`${100*O.value}%`,[n.value]:t===0?"2px":`${100*t}%`};return a.innerTrackImg!==void 0&&(i.backgroundImage=`url(${a.innerTrackImg}) !important`),i});function Se(t){const{min:i,max:s,step:v}=a;let h=i+t*(s-i);if(v>0){const P=(h-R.value)%v;h+=(Math.abs(P)>=v/2?(P<0?-1:1)*v:0)-P}return h=X.value(h),q(h,R.value,L.value)}function G(t){return I.value===0?0:(t-a.min)/I.value}function Ce(t,i){const s=Ke(t),v=a.vertical===!0?q((s.top-i.top)/i.height,0,1):q((s.left-i.left)/i.width,0,1);return q($.value===!0?1-v:v,O.value,E.value)}const le=l(()=>Pe(a.markers)===!0?a.markers:D.value),ne=l(()=>{const t=[],i=le.value,s=a.max;let v=a.min;do t.push(v),v+=i;while(v<s);return t.push(s),t}),re=l(()=>{const t=` ${ce}${y.value}-`;return ce+`${t}${a.switchMarkerLabelsSide===!0?"switched":"standard"}${t}${$.value===!0?"rtl":"ltr"}`}),U=l(()=>a.markerLabels===!1?null:Te(a.markerLabels).map((t,i)=>({index:i,value:t.value,label:t.label||t.value,classes:re.value+(t.classes!==void 0?" "+t.classes:""),style:{...oe(t.value),...t.style||{}}}))),ie=l(()=>({markerList:U.value,markerMap:$e.value,classes:re.value,getStyle:oe})),Re=l(()=>{const t=Q.value===0?"2px":100*le.value/Q.value;return{...te.value,backgroundSize:a.vertical===!0?`2px ${t}%`:`${t}% 2px`}});function Te(t){if(t===!1)return null;if(t===!0)return ne.value.map(Ze);if(typeof t=="function")return ne.value.map(s=>{const v=t(s);return p(v)===!0?{...v,value:s}:{value:s,label:v}});const i=({value:s})=>s>=a.min&&s<=a.max;return Array.isArray(t)===!0?t.map(s=>p(s)===!0?s:{value:s}).filter(i):Object.keys(t).map(s=>{const v=t[s],h=Number(s);return p(v)===!0?{...v,value:h}:{value:h,label:v}}).filter(i)}function oe(t){return{[F.value]:`${100*(t-a.min)/I.value}%`}}const $e=l(()=>{if(a.markerLabels===!1)return null;const t={};return U.value.forEach(i=>{t[i.value]=i}),t});function Le(){if(V["marker-label-group"]!==void 0)return V["marker-label-group"](ie.value);const t=V["marker-label"]||Je;return U.value.map(i=>t({marker:i,...ie.value}))}const we=l(()=>[[ze,_e,void 0,{[c.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function _e(t){t.isFinal===!0?(g.value!==void 0&&(x(t.evt),t.touch===!0&&e(!0),g.value=void 0,N("pan","end")),S.value=!1,b.value=!1):t.isFirst===!0?(g.value=M(t.evt),x(t.evt),e(),S.value=!0,N("pan","start")):(x(t.evt),e())}function ue(){b.value=!1}function qe(t){x(t,M(t)),e(),B.value=!0,S.value=!0,document.addEventListener("mouseup",Y,!0)}function Y(){B.value=!1,S.value=!1,e(!0),ue(),document.removeEventListener("mouseup",Y,!0)}function Ne(t){x(t,M(t)),e(!0)}function Ve(t){de.includes(t.keyCode)&&e(!0)}function Be(t){if(a.vertical===!0)return null;const i=T.lang.rtl!==a.reverse?1-t:t;return{transform:`translateX(calc(${2*i-1} * ${a.thumbSize} / 2 + ${50-100*i}%))`}}function Ie(t){const i=l(()=>B.value===!1&&(b.value===t.focusValue||b.value==="both")?" q-slider--focus":""),s=l(()=>`q-slider__thumb q-slider__thumb${y.value} q-slider__thumb${y.value}-${$.value===!0?"rtl":"ltr"} absolute non-selectable`+i.value+(t.thumbColor.value!==void 0?` text-${t.thumbColor.value}`:"")),v=l(()=>({width:a.thumbSize,height:a.thumbSize,[F.value]:`${100*t.ratio.value}%`,zIndex:b.value===t.focusValue?2:void 0})),h=l(()=>t.labelColor.value!==void 0?` text-${t.labelColor.value}`:""),P=l(()=>Be(t.ratio.value)),Z=l(()=>"q-slider__text"+(t.labelTextColor.value!==void 0?` text-${t.labelTextColor.value}`:""));return()=>{const J=[m("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[m("path",{d:a.thumbPath})]),m("div",{class:"q-slider__focus-ring fit"})];return(a.label===!0||a.labelAlways===!0)&&(J.push(m("div",{class:be.value+" absolute fit no-pointer-events"+h.value},[m("div",{class:ge.value,style:{minWidth:a.thumbSize}},[m("div",{class:he.value,style:P.value},[m("span",{class:Z.value},t.label.value)])])])),a.name!==void 0&&a.disable!==!0&&K(J,"push")),m("div",{class:s.value,style:v.value,...t.getNodeData()},J)}}function Fe(t,i,s,v){const h=[];a.innerTrackColor!=="transparent"&&h.push(m("div",{key:"inner",class:Me.value,style:te.value})),a.selectionColor!=="transparent"&&h.push(m("div",{key:"selection",class:_.value,style:t.value})),a.markers!==!1&&h.push(m("div",{key:"marker",class:W.value,style:Re.value})),v(h);const P=[Qe("div",{key:"trackC",class:fe.value,tabindex:i.value,...s.value},[m("div",{class:ye.value,style:ke.value},h)],"slide",w.value,()=>we.value)];if(a.markerLabels!==!1){const Z=a.switchMarkerLabelsSide===!0?"unshift":"push";P[Z](m("div",{key:"markerL",class:xe.value},Le()))}return P}return je(()=>{document.removeEventListener("mouseup",Y,!0)}),{state:{active:S,focus:b,preventFocus:B,dragging:g,editable:w,classes:C,tabindex:H,attributes:d,roundValueFn:X,keyStep:D,trackLen:I,innerMin:R,innerMinRatio:O,innerMax:L,innerMaxRatio:E,positionProp:F,sizeProp:n,isReversed:$},methods:{onActivate:qe,onMobileClick:Ne,onBlur:ue,onKeyup:Ve,getContent:Fe,getThumbRenderFn:Ie,convertRatioToModel:Se,convertModelToRatio:G,getDraggingRatio:Ce}}}const j={MIN:0,RANGE:1,MAX:2},va=ve({name:"QRange",props:{...pe,modelValue:{type:Object,default:()=>({min:null,max:null}),validator:e=>"min"in e&&"max"in e},dragRange:Boolean,dragOnlyRange:Boolean,leftLabelColor:String,leftLabelTextColor:String,rightLabelColor:String,rightLabelTextColor:String,leftLabelValue:[String,Number],rightLabelValue:[String,Number],leftThumbColor:String,rightThumbColor:String},emits:ea,setup(e,{emit:x}){const{proxy:{$q:M}}=ae(),{state:r,methods:a}=aa({updateValue:Q,updatePosition:E,getDragging:O,formAttrs:l(()=>({type:"hidden",name:e.name,value:`${e.modelValue.min}|${e.modelValue.max}`}))}),N=k(null),V=k(0),T=k(0),u=k({min:0,max:0});function K(){u.value.min=e.modelValue.min===null?r.innerMin.value:q(e.modelValue.min,r.innerMin.value,r.innerMax.value),u.value.max=e.modelValue.max===null?r.innerMax.value:q(e.modelValue.max,r.innerMin.value,r.innerMax.value)}me(()=>`${e.modelValue.min}|${e.modelValue.max}|${r.innerMin.value}|${r.innerMax.value}`,K),K();const S=l(()=>a.convertModelToRatio(u.value.min)),B=l(()=>a.convertModelToRatio(u.value.max)),b=l(()=>r.active.value===!0?V.value:S.value),g=l(()=>r.active.value===!0?T.value:B.value),y=l(()=>{const n={[r.positionProp.value]:`${100*b.value}%`,[r.sizeProp.value]:`${100*(g.value-b.value)}%`};return e.selectionImg!==void 0&&(n.backgroundImage=`url(${e.selectionImg}) !important`),n}),A=l(()=>{if(r.editable.value!==!0)return{};if(M.platform.is.mobile===!0)return{onClick:a.onMobileClick};const n={onMousedown:a.onActivate};return(e.dragRange===!0||e.dragOnlyRange===!0)&&Object.assign(n,{onFocus:()=>{r.focus.value="both"},onBlur:a.onBlur,onKeydown:F,onKeyup:a.onKeyup}),n});function $(n){return M.platform.is.mobile!==!0&&r.editable.value===!0&&e.dragOnlyRange!==!0?{onFocus:()=>{r.focus.value=n},onBlur:a.onBlur,onKeydown:F,onKeyup:a.onKeyup}:{}}const R=l(()=>e.dragOnlyRange!==!0?r.tabindex.value:null),L=l(()=>M.platform.is.mobile!==!0&&(e.dragRange||e.dragOnlyRange===!0)?r.tabindex.value:null),w=k(null),X=l(()=>$("min")),D=a.getThumbRenderFn({focusValue:"min",getNodeData:()=>({ref:w,key:"tmin",...X.value,tabindex:R.value}),ratio:b,label:l(()=>e.leftLabelValue!==void 0?e.leftLabelValue:u.value.min),thumbColor:l(()=>e.leftThumbColor||e.thumbColor||e.color),labelColor:l(()=>e.leftLabelColor||e.labelColor),labelTextColor:l(()=>e.leftLabelTextColor||e.labelTextColor)}),H=l(()=>$("max")),I=a.getThumbRenderFn({focusValue:"max",getNodeData:()=>({...H.value,key:"tmax",tabindex:R.value}),ratio:g,label:l(()=>e.rightLabelValue!==void 0?e.rightLabelValue:u.value.max),thumbColor:l(()=>e.rightThumbColor||e.thumbColor||e.color),labelColor:l(()=>e.rightLabelColor||e.labelColor),labelTextColor:l(()=>e.rightLabelTextColor||e.labelTextColor)});function Q(n){(u.value.min!==e.modelValue.min||u.value.max!==e.modelValue.max)&&x("update:modelValue",{...u.value}),n===!0&&x("change",{...u.value})}function O(n){const{left:o,top:c,width:d,height:C}=N.value.getBoundingClientRect(),z=e.dragOnlyRange===!0?0:e.vertical===!0?w.value.offsetHeight/(2*C):w.value.offsetWidth/(2*d),f={left:o,top:c,width:d,height:C,valueMin:u.value.min,valueMax:u.value.max,ratioMin:S.value,ratioMax:B.value},_=a.getDraggingRatio(n,f);return e.dragOnlyRange!==!0&&_<f.ratioMin+z?f.type=j.MIN:e.dragOnlyRange===!0||_<f.ratioMax-z?e.dragRange===!0||e.dragOnlyRange===!0?(f.type=j.RANGE,Object.assign(f,{offsetRatio:_,offsetModel:a.convertRatioToModel(_),rangeValue:f.valueMax-f.valueMin,rangeRatio:f.ratioMax-f.ratioMin})):f.type=f.ratioMax-_<_-f.ratioMin?j.MAX:j.MIN:f.type=j.MAX,f}function E(n,o=r.dragging.value){let c;const d=a.getDraggingRatio(n,o),C=a.convertRatioToModel(d);switch(o.type){case j.MIN:d<=o.ratioMax?(c={minR:d,maxR:o.ratioMax,min:C,max:o.valueMax},r.focus.value="min"):(c={minR:o.ratioMax,maxR:d,min:o.valueMax,max:C},r.focus.value="max");break;case j.MAX:d>=o.ratioMin?(c={minR:o.ratioMin,maxR:d,min:o.valueMin,max:C},r.focus.value="max"):(c={minR:d,maxR:o.ratioMin,min:C,max:o.valueMin},r.focus.value="min");break;case j.RANGE:const z=d-o.offsetRatio,f=q(o.ratioMin+z,r.innerMinRatio.value,r.innerMaxRatio.value-o.rangeRatio),_=C-o.offsetModel,W=q(o.valueMin+_,r.innerMin.value,r.innerMax.value-o.rangeValue);c={minR:f,maxR:f+o.rangeRatio,min:r.roundValueFn.value(W),max:r.roundValueFn.value(W+o.rangeValue)},r.focus.value="both";break}u.value=u.value.min===null||u.value.max===null?{min:c.min||e.min,max:c.max||e.max}:{min:c.min,max:c.max},e.snap!==!0||e.step===0?(V.value=c.minR,T.value=c.maxR):(V.value=a.convertModelToRatio(u.value.min),T.value=a.convertModelToRatio(u.value.max))}function F(n){if(de.includes(n.keyCode)===!1)return;Xe(n);const o=([34,33].includes(n.keyCode)?10:1)*r.keyStep.value,c=([34,37,40].includes(n.keyCode)?-1:1)*(r.isReversed.value===!0?-1:1)*(e.vertical===!0?-1:1)*o;if(r.focus.value==="both"){const d=u.value.max-u.value.min,C=q(r.roundValueFn.value(u.value.min+c),r.innerMin.value,r.innerMax.value-d);u.value={min:C,max:r.roundValueFn.value(C+d)}}else{if(r.focus.value===!1)return;{const d=r.focus.value;u.value={...u.value,[d]:q(r.roundValueFn.value(u.value[d]+c),d==="min"?r.innerMin.value:u.value.min,d==="max"?r.innerMax.value:u.value.max)}}}Q()}return()=>{const n=a.getContent(y,L,A,o=>{o.push(D(),I())});return m("div",{ref:N,class:"q-range "+r.classes.value+(e.modelValue.min===null||e.modelValue.max===null?" q-slider--no-value":""),...r.attributes.value,"aria-valuenow":e.modelValue.min+"|"+e.modelValue.max},n)}}}),ta={ratio:[String,Number]};function la(e,x){return l(()=>{const M=Number(e.ratio||(x!==void 0?x.value:void 0));return isNaN(M)!==!0&&M>0?{paddingBottom:`${100/M}%`}:null})}const na=1.7778,ma=ve({name:"QImg",props:{...ta,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:na},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:x,emit:M}){const r=k(e.initialRatio),a=la(e,r),N=ae(),{registerTimeout:V,removeTimeout:T}=se(),{registerTimeout:u,removeTimeout:K}=se(),S=l(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),B=l(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),b=[k(null),k(S.value)],g=k(0),y=k(!1),A=k(!1),$=l(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),R=l(()=>({width:e.width,height:e.height})),L=l(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),w=l(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function X(){if(K(),e.loadingShowDelay===0){y.value=!0;return}u(()=>{y.value=!0},e.loadingShowDelay)}function D(){K(),y.value=!1}function H({target:n}){ee(N)===!1&&(T(),r.value=n.naturalHeight===0?.5:n.naturalWidth/n.naturalHeight,I(n,1))}function I(n,o){o===1e3||ee(N)===!0||(n.complete===!0?Q(n):V(()=>{I(n,o+1)},50))}function Q(n){ee(N)!==!0&&(g.value=g.value^1,b[g.value].value=null,D(),n.getAttribute("__qerror")!=="true"&&(A.value=!1),M("load",n.currentSrc||n.src))}function O(n){T(),D(),A.value=!0,b[g.value].value=B.value,b[g.value^1].value=S.value,M("error",n)}function E(n){const o=b[n].value,c={key:"img_"+n,class:L.value,style:w.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...o};return g.value===n?Object.assign(c,{class:c.class+"current",onLoad:H,onError:O}):c.class+="loaded",m("div",{class:"q-img__container absolute-full",key:"img"+n},m("img",c))}function F(){return y.value===!1?m("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},Ue(x[A.value===!0?"error":"default"])):m("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},x.loading!==void 0?x.loading():e.noSpinner===!0?void 0:[m(Ye,{color:e.spinnerColor,size:e.spinnerSize})])}{let n=function(){me(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,o=>{T(),A.value=!1,o===null?(D(),b[g.value^1].value=S.value):X(),b[g.value].value=o},{immediate:!0})};He.value===!0?We(n):n()}return()=>{const n=[];return a.value!==null&&n.push(m("div",{key:"filler",style:a.value})),b[0].value!==null&&n.push(E(0)),b[1].value!==null&&n.push(E(1)),n.push(m(Ge,{name:"q-transition--fade"},F)),m("div",{key:"main",class:$.value,style:R.value,role:"img","aria-label":e.alt},n)}}});export{va as Q,ma as a};
