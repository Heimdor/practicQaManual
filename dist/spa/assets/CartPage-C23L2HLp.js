import{r as Q,C as q,D as d,E as s,F as A,N as o,L as p,K as u,H as t,Q as b,f as n,M as L,P,R as E,I as m,J as i,O as M}from"./index-DwtXEeEE.js";import{Q as R,a as g,b as f}from"./QItem-Cav7HXzn.js";import{Q as k}from"./QInput-CAHg_qN-.js";import{Q as U}from"./QList-DPQGZhAk.js";import{Q as D,a as V,b as w}from"./QPage-BKmakszr.js";import{Q as j}from"./QCardActions-C7c0BvX-.js";import{b as H}from"./main-CmGCYb36.js";import{u as J}from"./use-quasar-ChbBNSRg.js";import{s as K}from"./pinia-DeEn6jnt.js";import"./use-key-composition-ByB1cnyR.js";import"./use-id-DNP9DObu.js";import"./focus-manager-BJWzFvJg.js";const O={class:"row justify-center"},G={class:"col-12 col-md-8"},W={key:0,class:"text-center q-mt-xl"},X={key:1},Y=["src"],Z={class:"row items-center q-gutter-sm"},tt={class:"text-h6 text-weight-bold text-primary text-center"},et={class:"row items-center"},ot={class:"col"},st={class:"text-caption text-grey-6"},at={class:"col-auto"},lt={class:"text-h4 text-weight-bold text-primary"},nt={class:"row q-gutter-md"},it={class:"col"},rt={class:"col-auto"},dt={key:0,class:"text-positive q-mt-sm"},qt={__name:"CartPage",setup(ct){const _=J(),h=A(),c=H(),{cart:y,cartItemsCount:I,cartTotal:$}=K(c),v=Q(""),x=Q(!1);function C(){h.push("/shop")}function S(){h.push("/checkout")}function B(l,a){c.updateCartQuantity(l,a)}function F(l){c.updateCartQuantity(l.id,l.quantity+1)}function N(l){l.quantity>1&&c.updateCartQuantity(l.id,l.quantity-1)}function T(l){c.removeFromCart(l),_.notify({type:"info",message:"Товар удален из корзины",position:"top"})}function z(){v.value.trim()?(x.value=!0,_.notify({type:"positive",message:"Промокод успешно применен!",position:"top"})):_.notify({type:"warning",message:"Введите промокод",position:"top"})}return(l,a)=>(d(),q(D,{class:"q-pa-lg"},{default:s(()=>[o("div",O,[o("div",G,[a[5]||(a[5]=o("h4",{class:"q-mb-lg"},"Корзина покупок",-1)),u(y).length===0?(d(),p("div",W,[t(b,{name:"shopping_cart",size:"4rem",color:"grey-5"}),a[1]||(a[1]=o("p",{class:"text-h6 text-grey-6 q-mt-md"}," Корзина пуста ",-1)),t(n,{color:"primary",label:"Перейти к покупкам",onClick:C,class:"q-mt-md"})])):(d(),p("div",X,[t(U,{bordered:"",separator:""},{default:s(()=>[(d(!0),p(L,null,P(u(y),e=>(d(),q(R,{key:e.id,class:"q-pa-md"},{default:s(()=>[t(g,{avatar:""},{default:s(()=>[t(E,{size:"80px",square:""},{default:s(()=>[o("img",{src:e.image},null,8,Y)]),_:2},1024)]),_:2},1024),t(g,null,{default:s(()=>[t(f,{class:"text-h6"},{default:s(()=>[m(i(e.name),1)]),_:2},1024),t(f,{caption:""},{default:s(()=>[m(i(e.category),1)]),_:2},1024),t(f,{caption:"",class:"text-weight-bold"},{default:s(()=>[m(" $"+i(e.price)+" за единицу ",1)]),_:2},1024),t(f,{caption:""},{default:s(()=>[m(" Доступно: "+i(e.stock)+" шт. ",1)]),_:2},1024)]),_:2},1024),t(g,{side:"",class:"q-gutter-sm"},{default:s(()=>[o("div",Z,[t(n,{round:"",dense:"",icon:"remove",size:"sm",onClick:r=>N(e),disable:e.quantity<=1},null,8,["onClick","disable"]),t(k,{modelValue:e.quantity,"onUpdate:modelValue":[r=>e.quantity=r,r=>B(e.id,r)],modelModifiers:{number:!0},type:"number",dense:"",style:{width:"80px"},min:1},null,8,["modelValue","onUpdate:modelValue"]),t(n,{round:"",dense:"",icon:"add",size:"sm",onClick:r=>F(e)},null,8,["onClick"])]),o("div",tt," $"+i((e.price*e.quantity).toFixed(2)),1),t(n,{flat:"",round:"",icon:"delete",color:"negative",onClick:r=>T(e.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(V,{class:"q-mt-lg"},{default:s(()=>[t(w,null,{default:s(()=>[o("div",et,[o("div",ot,[a[2]||(a[2]=o("div",{class:"text-h5"},"Итого",-1)),o("div",st," Товаров: "+i(u(I))+" шт. ",1)]),o("div",at,[o("div",lt," $"+i(u($).toFixed(2)),1)])])]),_:1}),t(j,{align:"around"},{default:s(()=>[t(n,{flat:"",color:"grey-7",label:"Продолжить покупки",onClick:C}),t(n,{color:"primary",label:"Оформить заказ",icon:"payment",onClick:S,disable:u(y).length===0},null,8,["disable"])]),_:1})]),_:1}),t(V,{class:"q-mt-md"},{default:s(()=>[t(w,null,{default:s(()=>[a[4]||(a[4]=o("div",{class:"text-h6 q-mb-md"},"Промокод",-1)),o("div",nt,[o("div",it,[t(k,{modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=e=>v.value=e),label:"Введите промокод",placeholder:"SAVE10"},null,8,["modelValue"])]),o("div",rt,[t(n,{color:"secondary",label:"Применить",onClick:z})])]),x.value?(d(),p("div",dt,[t(b,{name:"check"}),a[3]||(a[3]=m(" Промокод применен! Скидка 10% ",-1))])):M("",!0)]),_:1,__:[4]})]),_:1})]))])])]),_:1}))}};export{qt as default};
